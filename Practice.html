<div class="app">
  <aside class="sidebar">
    <div class="brand" style="color:white;">LGU 3 ADMIN SYSTEM</div>
    <nav>
      <a href="admindashboard.html" class="nav-item active">Dashboard</a>
      <a href="adminvendor.html" class="nav-item">Vendor Management</a>
      <a href="admincommodity.html" class="nav-item">Commodity and Price Monitoring</a>
      <a href="admininspection.html" class="nav-item">Inspection and Compliance</a>
      <a href="reports.html" class="nav-item">Reports and AI Analytics</a>
      <a href="adminsettings.html" class="nav-item">Settings</a>
      <a href="main.html" class="nav-item" style="margin-top:2rem;font-weight:bold;">Logout</a>
    </nav>
  </aside>

  <section class="main">
    <header class="topbar">
      <button class="btn">‚Üê Back</button>
      <div style="flex-grow: 1; margin: 0 20px;">
        <input type="text" id="stallSearch" placeholder="üîç Search Stall No. (e.g., 32)" style="width: 100%; max-width: 400px; padding: 8px; border-radius: 20px; border: 1px solid var(--border);">
      </div>
      <button class="btn">Export</button>
    </header>

    <div class="content">
      <div class="market-blueprint-container">
        <div class="walkway horizontal-road">SERVICE ROAD (6.00 METERS WIDE)</div>

        <div class="blueprint-grid">
          <div class="section-block">
            <div class="label">FISH SECTION</div>
            <div class="stall-grid" id="grid-fish"></div>
          </div>
          
          <div class="walkway vertical-spine"></div> <div class="section-block">
            <div class="label">MEAT SECTION</div>
            <div class="stall-grid" id="grid-meat"></div>
          </div>

          <div class="walkway cross-passage" style="grid-column: 1 / span 3;">PASSAGEWAY</div>

          <div class="section-block">
            <div class="label">DRYGOODS SECTION</div>
            <div class="stall-grid" id="grid-drygoods"></div>
          </div>

          <div class="walkway vertical-spine"></div>

          <div class="section-block">
            <div class="label">GROCERY SECTION</div>
            <div class="stall-grid" id="grid-grocery"></div>
          </div>

          <div class="walkway cross-passage" style="grid-column: 1 / span 3;">PASSAGEWAY</div>

          <div class="section-block">
            <div class="label">TEXTILE SECTION (INSIDE)</div>
            <div class="stall-grid" id="grid-textile"></div>
          </div>

          <div class="walkway vertical-spine"></div>

          <div class="section-block">
            <div class="label">CARINDERIA</div>
            <div class="stall-grid" id="grid-carinderia"></div>
          </div>
        </div>

        <div class="entrance-area">
          <div class="walkway horizontal-road">K-5TH STREET (11.50 METERS WIDE)</div>
          <div class="center-entrance-marker">CENTER ENTRANCE</div>
        </div>
      </div>

      <div id="infoPanel" class="card" style="margin-top: 20px; border-left: 5px solid var(--blue); display: none;">
        <h3 id="panelStall">Stall #--</h3>
        <p><strong>Vendor:</strong> <span id="panelVendor">--</span></p>
        <p><strong>Category:</strong> <span id="panelCat">--</span></p>
      </div>
    </div>
  </section>
</div>

<style>
/* CSS GRID FOR THE BLUEPRINT */
.market-blueprint-container {
  background: #fff;
  padding: 15px;
  border: 1px solid #333;
  min-width: 800px;
}

.blueprint-grid {
  display: grid;
  grid-template-columns: 1fr 60px 1fr; /* Two section columns, one central corridor */
  gap: 0; /* Walkways act as the gap */
  border: 2px solid #555;
}

/* WALKWAY STYLING */
.walkway {
  background: #f0f0f0;
  color: #888;
  font-size: 10px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  text-transform: uppercase;
}

.horizontal-road { height: 40px; border: 1px solid #ccc; }
.cross-passage { height: 35px; border-top: 1px dashed #999; border-bottom: 1px dashed #999; }
.vertical-spine { border-left: 1px dashed #999; border-right: 1px dashed #999; }

/* SECTION & STALLS */
.section-block { padding: 10px; background: #fff; }
.label { font-size: 11px; font-weight: bold; text-align: center; margin-bottom: 5px; background: #eee; }
.stall-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 2px; }

.stall {
  aspect-ratio: 1;
  border: 1px solid #aaa;
  font-size: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
.stall:hover { background: #e3f2fd; }
.stall.occupied { background: #d1d3e2; border-color: #4e73df; }
.stall.active { background: #ffc107 !important; transform: scale(1.1); z-index: 2; }

.center-entrance-marker {
  width: 140px;
  margin: -10px auto 0;
  background: #fff;
  border: 2px solid red;
  color: red;
  text-align: center;
  font-weight: bold;
  padding: 5px;
  z-index: 5;
  position: relative;
}
</style>

<script>
// Logic to populate stalls and interactivity
const mockVendors = {
  32: { name: "Lily's Textile Stall", cat: "Textile" },
  5: { name: "Juan's Fresh Catch", cat: "Fish" },
  18: { name: "Baguio Meat Shop", cat: "Meat" }
};

function buildStalls(id, start, count, cat) {
  const container = document.getElementById(id);
  for (let i = 0; i < count; i++) {
    const num = start + i;
    const div = document.createElement('div');
    div.className = 'stall' + (mockVendors[num] ? ' occupied' : '');
    div.innerText = num;
    div.onclick = () => {
      document.querySelectorAll('.stall').forEach(s => s.classList.remove('active'));
      div.classList.add('active');
      const info = mockVendors[num] || { name: "Vacant", cat: cat };
      document.getElementById('infoPanel').style.display = 'block';
      document.getElementById('panelStall').innerText = "Stall #" + num;
      document.getElementById('panelVendor').innerText = info.name;
      document.getElementById('panelCat').innerText = info.cat || cat;
    };
    container.appendChild(div);
  }
}

// Initializing the map segments
buildStalls('grid-fish', 1, 20, 'Fish');
buildStalls('grid-meat', 21, 40, 'Meat');
buildStalls('grid-drygoods', 41, 60, 'Dry Goods');
buildStalls('grid-grocery', 61, 80, 'Grocery');
buildStalls('grid-textile', 81, 110, 'Textile');
buildStalls('grid-carinderia', 111, 130, 'Carinderia');

// Search functionality
document.getElementById('stallSearch').addEventListener('input', (e) => {
  const val = e.target.value;
  document.querySelectorAll('.stall').forEach(s => {
    s.style.background = (val && s.innerText === val) ? "yellow" : "";
  });
});
</script>
