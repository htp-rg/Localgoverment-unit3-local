<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Admin Dashboard - Market Layout</title>
<style>
:root {
  --sidebar-blue: #2c599d;
  --bg-light: #f4f7f6;
  --market-yellow: #fff9c4; /* The yellow floor look from your reference */
  --walkway-gray: #e0e0e0;
  --border-dark: #333;
  --stall-occupied: #a8b8d0;
  --stall-highlight: #ff5252;
}

/* GLOBAL RESET */
* { box-sizing: border-box; }
body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg-light); display: flex; height: 100vh; overflow: hidden; }

/* SIDEBAR STYLING */
.sidebar { width: 240px; background: var(--sidebar-blue); color: white; display: flex; flex-direction: column; flex-shrink: 0; }
.brand { padding: 20px; font-weight: 800; font-size: 1.2rem; border-bottom: 1px solid rgba(255,255,255,0.1); text-align: center; }
nav { padding: 10px; flex-grow: 1; }
.nav-item { display: block; padding: 12px 15px; color: rgba(255,255,255,0.8); text-decoration: none; border-radius: 4px; font-size: 0.9rem; margin-bottom: 2px; transition: 0.3s; }
.nav-item:hover, .nav-item.active { background: rgba(255,255,255,0.15); color: white; }
.logout { border-top: 1px solid rgba(255,255,255,0.1); padding: 20px; font-weight: bold; }

/* MAIN CONTENT */
.main-wrapper { flex-grow: 1; display: flex; flex-direction: column; min-width: 0; }
header { height: 64px; background: white; display: flex; align-items: center; justify-content: space-between; padding: 0 25px; border-bottom: 1px solid #ddd; }
.content { padding: 25px; overflow: auto; flex-grow: 1; }

/* SEARCH BAR */
.search-container { position: relative; }
#searchStall { padding: 8px 15px 8px 35px; border-radius: 20px; border: 1px solid #ccc; width: 300px; outline: none; }
.search-icon { position: absolute; left: 12px; top: 8px; color: #888; }

/* MARKET FLOOR PLAN */
.market-floor-plan {
  background: white;
  border: 1px solid #aaa;
  padding: 40px;
  min-width: 1100px;
  position: relative;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}

.market-map-grid {
  display: grid;
  /* Defining the multi-aisle layout */
  grid-template-columns: repeat(3, 1fr 40px) 1fr; 
  background: var(--market-yellow); /* Matching the yellow walkable area */
  border: 2px solid var(--border-dark);
  padding: 10px;
  gap: 0;
}

/* AISLES / WALKWAYS */
.aisle-v { background: var(--walkway-gray); grid-row: 1 / span 10; border-left: 1px dashed #999; border-right: 1px dashed #999; }
.aisle-h { grid-column: 1 / span 10; height: 40px; background: var(--walkway-gray); border-top: 1px dashed #999; border-bottom: 1px dashed #999; margin: 10px 0; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #777; font-weight: bold; letter-spacing: 2px; }

/* SECTION STYLES */
.section-block { background: transparent; padding: 10px; }
.section-header { font-size: 11px; font-weight: bold; color: #444; text-transform: uppercase; margin-bottom: 8px; border-bottom: 1px solid #ccc; padding-bottom: 3px; }

/* STALL GRID SYSTEM */
.stall-container { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; }
.stall {
  aspect-ratio: 1;
  background: white;
  border: 1px solid #888;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: 0.15s;
}
.stall:hover { transform: scale(1.2); z-index: 10; border-color: #000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
.stall.occupied { background: var(--stall-occupied); }
.stall.highlight { background: var(--stall-highlight) !important; color: white; border-color: red; font-weight: bold; }

/* INFO PANEL */
.info-box { margin-top: 20px; padding: 15px; background: #fff; border-left: 5px solid var(--sidebar-blue); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

</style>
</head>
<body>

  <aside class="sidebar">
    <div class="brand">LGU 3 ADMIN</div>
    <nav>
      <a href="#" class="nav-item active">Dashboard</a>
      <a href="#" class="nav-item">Active</a>
      <a href="#" class="nav-item">Vendor Management</a>
      <a href="#" class="nav-item">Vendor Commodity</a>
      <a href="#" class="nav-item">Inspection</a>
      <a href="#" class="nav-item">Admin Settings</a>
    </nav>
    <div class="logout">LOGOUT</div>
  </aside>

  <div class="main-wrapper">
    <header>
      <h2 style="color: #333;">Market Floor Plan</h2>
      <div class="search-container">
        <span class="search-icon">üîç</span>
        <input type="text" id="searchStall" placeholder="Search Stall No. (e.g. 32)">
      </div>
    </header>

    <div class="content">
      <div class="market-floor-plan">
        <div class="market-map-grid">
          
          <div class="section-block">
            <div class="section-header">Fish Section</div>
            <div class="stall-container" id="fish-stalls"></div>
          </div>

          <div class="aisle-v"></div>

          <div class="section-block">
            <div class="section-header">Meat Section</div>
            <div class="stall-container" id="meat-stalls"></div>
          </div>

          <div class="aisle-v"></div>

          <div class="section-block">
            <div class="section-header">Vegetables</div>
            <div class="stall-container" id="veg-stalls"></div>
          </div>

          <div class="aisle-v"></div>

          <div class="section-block">
            <div class="section-header">Grocery</div>
            <div class="stall-container" id="grocery-stalls"></div>
          </div>

          <div class="aisle-h">MAIN CROSSROAD WALKWAY</div>

          <div class="section-block">
            <div class="section-header">Dry Goods</div>
            <div class="stall-container" id="dry-stalls"></div>
          </div>
          <div class="aisle-v"></div>
          <div class="section-block">
            <div class="section-header">Textiles</div>
            <div class="stall-container" id="textile-stalls"></div>
          </div>
          <div class="aisle-v"></div>
          <div class="section-block">
            <div class="section-header">Carinderia</div>
            <div class="stall-container" id="car-stalls"></div>
          </div>
          <div class="aisle-v"></div>
          <div class="section-block" style="background: rgba(0,0,0,0.03);">
            <div class="section-header">Service Area</div>
          </div>

        </div>

        <div class="info-box" id="stallDetail">
          Click a stall to view vendor and compliance information.
        </div>
      </div>
    </div>
  </div>

<script>
// Mock Database based on your previous input
const vendors = {
  32: { name: "Lily's Textile Stall", status: "Active", compliance: "Pass" },
  18: { name: "Maria Meat Shop", status: "Active", compliance: "Warning" },
  5: { name: "Juan Fish Vendor", status: "Inactive", compliance: "N/A" }
};

function generateStalls(id, start, count) {
  const container = document.getElementById(id);
  for (let i = 0; i < count; i++) {
    const num = start + i;
    const stall = document.createElement('div');
    stall.className = 'stall' + (vendors[num] ? ' occupied' : '');
    stall.innerText = num;
    stall.dataset.no = num;

    stall.onclick = () => {
      document.querySelectorAll('.stall').forEach(s => s.classList.remove('highlight'));
      stall.classList.add('highlight');
      const v = vendors[num];
      document.getElementById('stallDetail').innerHTML = v ? 
        `<strong>Stall #${num}:</strong> ${v.name} | Status: ${v.status} | Compliance: ${v.compliance}` : 
        `<strong>Stall #${num}:</strong> Vacant Stall`;
    };
    container.appendChild(stall);
  }
}

// Populate sections
generateStalls('fish-stalls', 1, 20);
generateStalls('meat-stalls', 21, 40);
generateStalls('veg-stalls', 41, 60);
generateStalls('grocery-stalls', 61, 80);
generateStalls('dry-stalls', 81, 100);
generateStalls('textile-stalls', 30, 15); // Lily is at #32
generateStalls('car-stalls', 116, 20);

// Search Feature
document.getElementById('searchStall').addEventListener('input', function(e) {
  const query = e.target.value;
  document.querySelectorAll('.stall').forEach(s => {
    s.classList.remove('highlight');
    if (query && s.dataset.no === query) {
      s.classList.add('highlight');
      s.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  });
});
</script>
</body>
</html>
