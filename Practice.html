<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LGU 3 Admin - Market Floor Plan</title>
<style>
:root {
  --sidebar-bg: #2c599d;
  --sidebar-hover: #1e3d6d;
  --map-yellow: #fff9c4;
  --text-gray: #5f6368;
  --border-light: #dadce0;
}

* { box-sizing: border-box; }
body { margin: 0; font-family: 'Segoe UI', Roboto, Arial, sans-serif; display: flex; height: 100vh; overflow: hidden; }

/* SIDEBAR STYLES */
.sidebar { width: 240px; background: var(--sidebar-bg); color: white; display: flex; flex-direction: column; flex-shrink: 0; }
.brand { padding: 20px; font-weight: bold; font-size: 1.1rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
nav { flex-grow: 1; padding: 10px 0; }
.nav-item { 
    display: flex; align-items: center; padding: 12px 20px; 
    text-decoration: none; color: rgba(255,255,255,0.8); font-size: 0.9rem; transition: 0.2s;
}
.nav-item:hover, .nav-item.active { background: var(--sidebar-hover); color: white; }
.nav-item i { margin-right: 15px; width: 20px; text-align: center; }

/* MAIN CONTENT */
.main { flex-grow: 1; display: flex; flex-direction: column; background: #f1f3f4; }
.topbar { 
    height: 64px; background: white; display: flex; align-items: center; 
    padding: 0 24px; border-bottom: 1px solid var(--border-light); justify-content: space-between;
}
.search-container { position: relative; width: 400px; }
#stallSearch { 
    width: 100%; padding: 10px 15px 10px 40px; border-radius: 8px; 
    border: 1px solid var(--border-light); background: #f1f3f4; outline: none;
}
.search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-gray); }

/* ARCHITECTURAL MAP */
.content { flex-grow: 1; padding: 24px; overflow: auto; display: flex; justify-content: center; }
.map-canvas {
    background: white; border-radius: 12px; border: 1px solid var(--border-light);
    padding: 40px; position: relative; min-width: 1000px; height: fit-content; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}

.market-floor {
    background: var(--map-yellow); border: 2px solid #333; border-radius: 15px;
    display: grid; grid-template-columns: repeat(20, 1fr); grid-template-rows: repeat(12, 40px);
    position: relative; padding: 10px;
}

/* DOT MARKERS FOR ARCHITECTURAL LOOK */
.floor-dot {
    width: 4px; height: 4px; background: black; border-radius: 50%;
    position: absolute; z-index: 1;
}

/* WALKWAYS / CORRIDORS */
.corridor-v { grid-column: 7 / span 1; grid-row: 1 / span 12; border-left: 1px dashed #999; border-right: 1px dashed #999; }
.corridor-h { grid-column: 1 / span 20; grid-row: 6 / span 1; border-top: 1px dashed #999; border-bottom: 1px dashed #999; }

/* STALL BLOCKS */
.stall-block {
    background: #e0e0e0; border: 1px solid #777; padding: 5px;
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px; z-index: 2;
}
.stall {
    width: 100%; aspect-ratio: 1; background: white; border: 0.5px solid #aaa;
    font-size: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer;
}
.stall:hover { background: #bbdefb; }
.stall.occupied { background: #90caf9; }
.stall.active { border: 2px solid #2c599d; z-index: 10; transform: scale(1.2); background: white !important; }

/* LEGEND/INFO OVERLAY */
.info-overlay {
    position: absolute; bottom: 20px; right: 20px; background: white;
    padding: 15px; border-radius: 8px; border: 1px solid var(--border-light); box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
</style>
</head>
<body>

<aside class="sidebar">
    <div class="brand">LGU 3 ADMIN</div>
    <nav>
        <a href="#" class="nav-item active"><i>üìä</i> Dashboard</a>
        <a href="#" class="nav-item"><i>üë§</i> Vendor Management</a>
        <a href="#" class="nav-item"><i>üì¶</i> Vendor Commodity</a>
        <a href="#" class="nav-item"><i>üîç</i> Inspection</a>
        <a href="#" class="nav-item"><i>‚öôÔ∏è</i> Settings</a>
        <a href="#" class="nav-item" style="margin-top:auto"><i>üö™</i> Logout</a>
    </nav>
</aside>

<main class="main">
    <header class="topbar">
        <h2 style="font-weight: 500;">Market Floor Plan</h2>
        <div class="search-container">
            <span class="search-icon">üîç</span>
            <input type="text" id="stallSearch" placeholder="Search Stall No.">
        </div>
    </header>

    <div class="content">
        <div class="map-canvas">
            <div class="market-floor" id="marketFloor">
                <div class="corridor-v"></div>
                <div class="corridor-h"></div>

                <div class="stall-block" style="grid-column: 2 / span 4; grid-row: 2 / span 3;" id="fishSec"></div>
                
                <div class="stall-block" style="grid-column: 9 / span 4; grid-row: 2 / span 3;" id="meatSec"></div>

                <div class="stall-block" style="grid-column: 2 / span 4; grid-row: 8 / span 3;" id="drySec"></div>

                <div class="stall-block" style="grid-column: 9 / span 4; grid-row: 8 / span 3;" id="grocSec"></div>

                <div class="stall-block" style="grid-column: 15 / span 4; grid-row: 4 / span 6; transform: rotate(5deg);">
                    <div class="stall">313</div><div class="stall">314</div>
                    <div class="stall">315</div><div class="stall">316</div>
                    <div class="stall">317</div><div class="stall">318</div>
                </div>
            </div>

            <div class="info-overlay" id="infoPanel">
                <h4 style="margin:0 0 5px 0">Stall Information</h4>
                <p id="details" style="margin:0; font-size: 0.85rem; color: var(--text-gray);">Select a stall to see details.</p>
            </div>
        </div>
    </div>
</main>

<script>
// Mock data
const vendors = {
    32: { name: "Lily's Textile", status: "Occupied" },
    18: { name: "Maria Meat Shop", status: "Occupied" }
};

// Generate dots for architectural feel
const floor = document.getElementById('marketFloor');
for(let i=0; i<100; i++) {
    let dot = document.createElement('div');
    dot.className = 'floor-dot';
    dot.style.left = Math.random() * 100 + '%';
    dot.style.top = Math.random() * 100 + '%';
    floor.appendChild(dot);
}

function fillBlock(id, start, count) {
    const block = document.getElementById(id);
    for(let i=0; i<count; i++) {
        let num = start + i;
        let s = document.createElement('div');
        s.className = 'stall' + (vendors[num] ? ' occupied' : '');
        s.innerText = num;
        s.onclick = () => {
            document.querySelectorAll('.stall').forEach(el => el.classList.remove('active'));
            s.classList.add('active');
            const v = vendors[num];
            document.getElementById('details').innerHTML = v ? 
                `<strong>Stall ${num}</strong>: ${v.name} (${v.status})` : 
                `<strong>Stall ${num}</strong>: Vacant`;
        };
        block.appendChild(s);
    }
}

fillBlock('fishSec', 1, 12);
fillBlock('meatSec', 13, 12);
fillBlock('drySec', 25, 12);
fillBlock('grocSec', 37, 12);

// Search
document.getElementById('stallSearch').oninput = function(e) {
    const val = e.target.value;
    document.querySelectorAll('.stall').forEach(s => {
        s.style.background = (val && s.innerText === val) ? "#fff176" : "";
    });
};
</script>
</body>
</html>
