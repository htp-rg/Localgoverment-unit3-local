<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barangay Market Map</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6f9;
}
.app{
  display:grid;
  grid-template-columns:220px 1fr;
  height:100vh;
}
.sidebar{
  background:#4e73df;
  color:#fff;
  padding:15px;
}
.sidebar h2{
  font-size:16px;
  margin-bottom:20px;
}
.sidebar a{
  display:block;
  padding:8px;
  color:#fff;
  text-decoration:none;
  border-radius:6px;
  margin-bottom:5px;
}
.sidebar a:hover{background:#fff;color:#4e73df;}

.main{
  display:flex;
  flex-direction:column;
}
.topbar{
  background:#fff;
  padding:10px 15px;
  border-bottom:1px solid #ddd;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.content{
  padding:15px;
  overflow:hidden;
}

/* MAP CONTAINER */
.map-wrapper{
  border:2px solid #333;
  background:#ddd;
  width:100%;
  height:520px;
  position:relative;
  overflow:hidden;
  border-radius:10px;
}

/* zoom + drag */
#map{
  transform-origin:0 0;
  cursor:grab;
}

/* STALL STYLE */
.stall{
  fill:#fff;
  stroke:#555;
  stroke-width:1;
  cursor:pointer;
}
.stall:hover{stroke:#000;stroke-width:2;}
.occupied{fill:#9ec5ff;}
.vacant{fill:#eaeaea;}
.violation{fill:#ff4d4d;}
.reserved{fill:#ffd700;}

/* WALKWAYS */
.walkway{
  fill:#777;
  opacity:.6;
}

/* INFO PANEL */
.info-panel{
  margin-top:10px;
  background:#fff;
  padding:10px;
  border-radius:6px;
  border:1px solid #ddd;
  font-size:14px;
}
</style>
</head>
<body>

<div class="app">
  <div class="sidebar">
    <h2>LGU ADMIN</h2>
    <a href="#">Dashboard</a>
    <a href="#">Vendor Management</a>
    <a href="#">Compliance</a>
    <a href="#">Logout</a>
  </div>

  <div class="main">
    <div class="topbar">
      <h3>Barangay Market Map</h3>
      <input id="search" placeholder="Search stall no..." style="padding:5px;">
    </div>

    <div class="content">
      <div class="map-wrapper">
        <!-- SVG MAP (REAL LAYOUT STYLE LIKE YOUR IMAGE) -->
        <svg id="map" width="1200" height="700">

          <!-- MARKET BORDER (IRREGULAR SHAPE) -->
          <polygon points="50,50 1050,50 1150,200 1100,600 100,600 50,400"
                   fill="#f7f0c8" stroke="#333" stroke-width="4"/>

          <!-- WALKWAYS -->
          <rect x="520" y="80" width="60" height="500" class="walkway"/>
          <rect x="80" y="300" width="950" height="60" class="walkway"/>
          <rect x="800" y="200" width="60" height="350" transform="rotate(25 800 200)" class="walkway"/>

          <!-- STALL BLOCK LEFT TOP -->
          <g id="blockA"></g>

          <!-- STALL BLOCK LEFT BOTTOM -->
          <g id="blockB"></g>

          <!-- STALL BLOCK CENTER -->
          <g id="blockC"></g>

          <!-- STALL BLOCK RIGHT (DIAGONAL LIKE IMAGE) -->
          <g id="blockD" transform="rotate(25 820 350)"></g>

        </svg>
      </div>

      <div class="info-panel" id="info">Click a stall to view details.</div>
    </div>
  </div>
</div>

<script>
/* SAMPLE VENDOR DATA */
const vendors = {
  5:{name:"Pedro Fish Vendor",status:"occupied"},
  12:{name:"Maria Meat Shop",status:"occupied"},
  18:{name:"Violation Stall",status:"violation"},
  25:{name:"Reserved Stall",status:"reserved"},
};

/* CREATE STALLS FUNCTION */
function createBlock(groupId,start,x,y,rows,cols,dx,dy){
  const g=document.getElementById(groupId);
  let num=start;
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      const rect=document.createElementNS("http://www.w3.org/2000/svg","rect");
      rect.setAttribute("x",x+c*dx);
      rect.setAttribute("y",y+r*dy);
      rect.setAttribute("width",40);
      rect.setAttribute("height",40);
      rect.classList.add("stall");

      let status="vacant";
      if(vendors[num]) status=vendors[num].status;
      rect.classList.add(status);

      rect.dataset.no=num;

      rect.onclick=()=>{
        const v=vendors[num];
        document.getElementById("info").innerHTML=v?
          `<b>Stall ${num}</b><br>${v.name}<br>Status: ${v.status}`:
          `<b>Stall ${num}</b><br>Status: Vacant`;
      };

      g.appendChild(rect);

      // stall number text
      const text=document.createElementNS("http://www.w3.org/2000/svg","text");
      text.setAttribute("x",x+c*dx+12);
      text.setAttribute("y",y+r*dy+25);
      text.setAttribute("font-size","10");
      text.textContent=num;
      g.appendChild(text);

      num++;
    }
  }
}

/* BLOCKS LIKE YOUR IMAGE */
createBlock("blockA",1,120,120,4,4,50,50);
createBlock("blockB",17,120,380,4,4,50,50);
createBlock("blockC",33,420,380,4,4,50,50);
createBlock("blockD",49,820,260,4,4,50,50);

/* SEARCH */
document.getElementById("search").oninput=function(){
  const val=this.value;
  document.querySelectorAll(".stall").forEach(s=>{
    s.style.stroke="#555";
    if(s.dataset.no===val){
      s.style.stroke="black";
      s.style.strokeWidth=3;
    }
  });
};

/* ZOOM + DRAG */
let scale=1,drag=false,startX,startY,offsetX=0,offsetY=0;
const map=document.getElementById("map");

map.addEventListener("wheel",e=>{
  e.preventDefault();
  scale+=e.deltaY*-0.001;
  scale=Math.min(Math.max(0.5,scale),2);
  map.style.transform=`translate(${offsetX}px,${offsetY}px) scale(${scale})`;
});

map.addEventListener("mousedown",e=>{
  drag=true;
  startX=e.clientX-offsetX;
  startY=e.clientY-offsetY;
  map.style.cursor="grabbing";
});
window.addEventListener("mouseup",()=>{drag=false;map.style.cursor="grab";});
window.addEventListener("mousemove",e=>{
  if(!drag)return;
  offsetX=e.clientX-startX;
  offsetY=e.clientY-startY;
  map.style.transform=`translate(${offsetX}px,${offsetY}px) scale(${scale})`;
});
</script>

</body>
</html>
